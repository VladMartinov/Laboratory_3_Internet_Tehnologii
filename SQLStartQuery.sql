-- Создание таблицы "Группа"
CREATE TABLE Группа (
    ID_группы SERIAL PRIMARY KEY,
    Название_группы VARCHAR(255) NOT NULL,
    Номер_курса INTEGER CHECK (Номер_курса > 0)
);

-- Создание таблицы "Студент"
CREATE TABLE Студент (
    ID_студента SERIAL PRIMARY KEY,
    ID_группы INTEGER REFERENCES Группа(ID_группы),
    Имя VARCHAR(255) NOT NULL,
    Отчество VARCHAR(255),
    Фамилия VARCHAR(255) NOT NULL,
    СНИЛС VARCHAR(14) UNIQUE,  -- Уникальный СНИЛС
    Адрес_проживания TEXT,
    Возраст INTEGER NOT NULL
);

-- Создание таблицы "Предмет"
CREATE TABLE Предмет (
    ID_предмета SERIAL PRIMARY KEY,
    Наименование VARCHAR(255) NOT NULL,
    Курс INTEGER CHECK (Курс > 0),
    Количество_часов INTEGER CHECK (Количество_часов > 0)
);

-- Создание таблицы "Студент_изучает_Предмет"
CREATE TABLE Студент_изучает_Предмет (
    ID_предмета INTEGER REFERENCES Предмет(ID_предмета),
    ID_студента INTEGER REFERENCES Студент(ID_студента),
    PRIMARY KEY (ID_предмета, ID_студента) -- Составной ключ для уникальности
);


-- Пример вставки данных (для проверки):
INSERT INTO Группа (Название_группы, Номер_курса) VALUES ('Группа А', 1), ('Группа Б', 2);

INSERT INTO Предмет (Наименование, Курс, Количество_часов) VALUES 
('Математика', 1, 144), ('Физика', 1, 108), ('История', 1, 72);

INSERT INTO Студент (ID_группы, Имя, Отчество, Фамилия, СНИЛС, Адрес_проживания, Возраст) VALUES
(1, 'Иван', 'Иванович', 'Иванов', '12345678901234', 'ул. Ленина, 1', 18),
(2, 'Петр', 'Петрович', 'Петров', '01234567890123', 'ул. Кирова, 10', 19);

INSERT INTO Студент_изучает_Предмет (ID_предмета, ID_студента) VALUES
(1,1), (2,1), (3,2);